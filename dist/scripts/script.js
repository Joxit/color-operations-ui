/*!
 * color-operation-ui
 * Copyright (C) 2016-2017  Jones Magloire @Joxit
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
const r={};r.hex={rgb:function(r){var n=/^0x([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/i,t=/^0x([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/i;return r&&null!=r.match(n)?[(r>>8)+16*(r>>8),((240&r)>>4)+16*((240&r)>>4),(15&r)+16*(15&r)]:r&&null!=r.match(t)?[r>>16,(65280&r)>>8,255&r]:void 0},rgba:function(r){var n=this.rgb(r);return n?[n[0],n[1],n[2],1]:null},hsl:function(n){var t=this.rgb(n);return t?r.rgb.hsl(t):null},hsla:function(r){var n=this.hsl(r);return!n||[n[0],n[1],n[2],1]},fromString:function(r){if(r)return r=r.replace(/^#*/,"0x"),r<=16777215&&(5==r.length||8==r.length)?r:void 0},toString:function(r){if(r)return r.replace(/^(0x)?/i,"#")},isValid:function(r){return void 0!=this.fromString(r)}},r.rgb={hex:function(r){if(r){var n=Number(r[0]).toString(16),t=Number(r[1]).toString(16),i=Number(r[2]).toString(16);return(1===n.length?"0":"")+n+(1===t.length?"0":"")+t+(1===i.length?"0":"")+i}},rgba:function(r){return r?[r[0],r[1],r[2],1]:null},hsl:function(r){if(r&&Array.isArray(r)&&!(r.length<3)){var n=r[0]/255,t=r[1]/255,i=r[2]/255,a=Math.max(n,t,i),e=Math.min(n,t,i),u=a-e,l=0;switch(a){case e:l=0;break;case n:l=(t-i)/u+(t<i?6:0);break;case t:l=(i-n)/u+2;break;case i:l=(n-t)/u+4}var o=.5*(a+e),h=0==u?0:u/(1-Math.abs(2*o-1));return[60*l,h,o]}},hsla:function(r){var n=this.hsl(r);return n?[n[0],n[1],n[2],1]:null},fromString:function(r){if(r){var n;return r=r.replace(/ /g,""),(null!=(n=r.match(/^rgb\(([0-9]+),([0-9]+),([0-9]+)\)$/i))||null!=(n=r.match(/^\[?([0-9]+),([0-9]+),([0-9]+)\]?$/)))&&n[1]<=255&&n[2]<=255&&n[3]<=255?[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])]:void 0}},toString:function(r){if(r&&Array.isArray(r)&&3==r.length)return"rgb("+r[0]+","+r[1]+","+r[2]+")"},convertFromString:function(n){return r.hex.rgb(r.hex.fromString(n))||r.hsl.rgb(r.hsl.fromString(n))||r.rgb.fromString(n)},isValid:function(r){return void 0!=this.fromString(r)}},r.rgba={hex:function(n){return n?r.rgb.hex(n):null},rgb:function(r){return r?[r[0],r[1],r[2]]:null},hsl:function(n){return r.rgb.hsl(n)},hsla:function(n){var t=r.rgb.hsl(n);return t?[t[0],t[1],t[2],n[3]]:null},fromString:function(r){if(r){var n;return r=r.replace(/ /g,""),null!=(n=r.match(/^rgba\(([0-9]+),([0-9]+),([0-9]+),([0-9.]+)\)$/i))||null!=(n=r.match(/^\[?([0-9]+),([0-9]+),([0-9]+),([0-9.]+)\]?$/))?[parseInt(n[1]),parseInt(n[2]),parseInt(n[3]),parseInt(n[4])]:void 0}},toString:function(r){if(r&&Array.isArray(r)&&r.length>=4)return"rgba("+Math.round(r[0])+","+Math.round(r[1])+","+Math.round(r[2])+","+r[3]+")"},isValid:function(r){return void 0!=this.fromString(r)}},r.hsl={hex:function(n){var t=r.hsl.rgb(n);return t?r.rgb.hex(t):null},rgb:function(r){if(r){var n,t=r[0],i=r[1],a=r[2],e=(1-Math.abs(2*a-1))*i,u=e*(1-Math.abs(t/60%2-1)),l=a-e/2;return t<60?n=[e+l,u+l,l]:t<120?n=[u+l,e+l,l]:t<180?n=[l,e+l,u+l]:t<240?n=[l,u+l,e+l]:t<300?n=[u+l,l,e+l]:t<360&&(n=[e+l,l,u+l]),n?[Math.round(255*n[0]),Math.round(255*n[1]),Math.round(255*n[2])]:void 0}},rgba:function(r){var n=this.rgb(r);return n?[n[0],n[1],n[2],1]:null},hsla:function(r){return r?[r[0],r[1],r[2],1]:null},fromString:function(r){if(r){var n;if(r=r.replace(/ /g,""),null!=(n=r.match(/^hsl\(([0-9.]+),([0-9.]+)(%?),([0-9.]+)(%?)\)$/i))||null!=(n=r.match(/^\[?([0-9.]+),([0-9.]+)(%?),([0-9.]+)(%?)\]?$/))){var t=[parseFloat(n[1]),"%"==n[3]?n[2]/100:parseFloat(n[2]),"%"==n[5]?n[4]/100:parseFloat(n[4])];if(t[0]<360&&t[1]<=1&&t[2]<=1)return t}}},toString:function(r){if(r&&Array.isArray(r)&&3==r.length)return"hsl("+(1*r[0]).toFixed(2)+", "+(100*r[1]).toFixed(2)+"%, "+(100*r[2]).toFixed(2)+"%)"},isValid:function(r){return void 0!=this.fromString(r)}},r.hsla={hex:function(n){return r.hsl.hex(n)},rgb:function(n){return r.hsl.rgb(n)},rgba:function(r){var n=this.rgb(r);return n?[n[0],n[1],n[2],r[3]]:null},hsl:function(r){return r?[r[0],r[1],r[2]]:null},fromString:function(r){if(r){var n;if(r=r.replace(/ /g,""),null!=(n=r.match(/^hsla\(([0-9.]+),([0-9.]+)(%?),([0-9.]+)(%?),([0-9.]+)\)$/i))||null!=(n=r.match(/^\[?([0-9.]+),([0-9.]+)(%?),([0-9.]+)(%?),([0-9.]+)\]?$/))){var r=[parseFloat(n[1]),"%"==n[3]?n[2]/100:parseFloat(n[2]),"%"==n[5]?n[4]/100:parseFloat(n[4]),parseFloat(n[6])];if(r[0]<360&&r[1]<=1&&r[2]<=1)return r}}},toString:function(r){if(r&&Array.isArray(r)&&4==r.length)return"hsla("+(1*r[0]).toFixed(2)+", "+(100*r[1]).toFixed(2)+"%, "+(100*r[2]).toFixed(2)+"%,"+r[3]+")"},isValid:function(r){return void 0!=this.fromString(r)}},r.isValid=function(n){return r.hex.isValid(n)||r.rgb.isValid(n)||r.rgba.isValid(n)||r.hsl.isValid(n)||r.hsla.isValid(n)},r.getStringTypeAndValue=function(n){var t=r.hex.fromString(n),i=r.rgb.fromString(n),a=r.rgba.fromString(n),e=r.hsl.fromString(n),u=r.hsla.fromString(n);return t?{value:t,type:"hex"}:i?{value:i,type:"rgb"}:a?{value:a,type:"rgba"}:e?{value:e,type:"hsl"}:u?{value:u,type:"hsla"}:void 0},"undefined"!=typeof module&&(module.exports=r),"undefined"!=typeof window&&(window.colorConverter=r),riot.mount("app");